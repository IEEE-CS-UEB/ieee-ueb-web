---
import "./ArticlePreview.css";
import { Icon } from "astro-icon";
import { dissectPathname } from "../../shenanigans/routing";
import fs from 'fs';

const { author, img, title, views, society, type, url } = Astro.props;
let { lang } = dissectPathname(Astro.url.pathname);

const articleIDs: {} = JSON.parse(fs.readFileSync('src/data/article-ids.json').toString())

const getArticleID = (articleName: string) => {
	const requiredArticleName = articleName.replace(/(\/.+)(?=\/.+$)/gm, '').replace(/\//, '')
	// console.log(`artname: ${requiredArticleName}`)
	// console.log('artIDs:')
	// console.log(articleIDs)
	// console.log(`[${lang}][${requiredArticleName}]`)
	return articleIDs[lang][requiredArticleName];
}
---

		<div id="Posts">
				<article class="Post Container">
					{/* Imagen Enfocada de Flora.css */}
					<div class="Img Notext"
						style={{backgroundImage: `url(${img})`}}
						>
							{/* <img> por dentro (por temas de accesibilidad) */}
							<img alt={`Image for article ${title} by ${views}`}/>
					</div>

					<div class="Post-user">
						<div class="Post-user-profilepicture">
							<Icon name="ph:user-circle" width="24px"/>
						</div>

						<div class="Post-user-nickname">
							<span>{author}</span>
						</div>
						<span>|</span>
						<div class="Post-chapter">
							<span>{society}</span>
						</div>
						
						<div class="Badge" style={{
							backgroundColor: type == 'Blog' ? '#009999' : 'var(--theme-main)'
						}}>{type}
						</div>
					</div>
					<div>
						<div class="Cont">
							<div class="Post-caption">
                <a class="a" href= {`posts/${getArticleID(url)}`}>
								<h1>{title}</h1>
                  </a>
							</div>
							<div class="Post-w">
								<Icon name="ph:eyeglasses" width="24px" style={{paddingRight: '5px'}}/>
								<strong>{views}</strong>

							</div>
						</div>
					</div>
				</article>
		</div>